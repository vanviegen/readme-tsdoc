# Instructions for AI Contributors

## Project Overview

`readme-tsdoc` is a simple tool that extracts documentation from TypeScript/JavaScript files using the TypeScript compiler API and automatically inserts it into README.md files. It parses JSDoc comments, type information, function signatures, parameters, return types, and examples to generate markdown documentation.

## How It Works

1. Scans markdown files for marker comments like `The following is auto-generated from FILENAME`
2. Uses TypeScript compiler API to analyze the source file and extract all exported symbols
3. Generates markdown documentation from JSDoc comments and type information
4. Replaces content between the marker and next heading with generated docs
5. Automatically adjusts heading levels based on surrounding content

## Most Important Files

- **`src/readme-tsdoc.js`** - Main documentation generation logic using TypeScript compiler API
- **`src/cli.js`** - Command-line interface and argument parsing
- **`test/kitchensink.ts`** - Comprehensive test case with all supported TypeScript constructs
- **`test/kitchensink-expected.md`** - Expected output that actual results are compared against
- **`test/run`** - Test runner script that generates docs and compares with expected output

## Development Workflow

### For Feature Changes

1. **Add test cases to `test/kitchensink.ts`** (if testing new functionality)
   - The file serves as a comprehensive test case covering all TypeScript constructs
   - Only add if you need to test NEW functionality

2. **Run tests**: `npm run test`
   - This generates `test/kitchensink-output.md` from `test/kitchensink.ts`
   - Compares output against `test/kitchensink-expected.md`

3. **Review changes**: Inspect the generated output carefully
   - Look at the diff shown when tests fail
   - Ensure documentation format is correct and readable

4. **Update expected output** (if changes look good):
   ```bash
   cp test/kitchensink-output.md test/kitchensink-expected.md
   ```

### For Bug Fixes

- Usually no need to modify `test/kitchensink.ts`
- Just run tests and update expected output if the fix changes output format

### For Any Changes

- There is usually no need to read the entire `test/kitchensink.ts` file (just look at the git diff) or the `test/kitchensink-output.md` file (just look at the output of `npm run test`)
- After you've got things working as requested, go through your changes (using `git diff` if needed) and see if you can simplify/reduce/improve the code

## Code Guidelines

**⚠️ CRITICAL: Minimize code additions!**

- **Reuse existing code** instead of adding new code
- Keep source code **small and readable**
- If you see opportunities to **refactor and reduce complexity/duplication**, propose it to the human
- Focus on **simplicity and maintainability**

## Keeping This File Updated

- Keep this file **brief** - only top-level workflow info
- **No detailed implementation specifics**
- Update when major workflow changes occur
- Always maintain the "minimize code" emphasis
